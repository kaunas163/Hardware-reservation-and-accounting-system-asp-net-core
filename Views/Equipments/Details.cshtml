@using HardwareReservationAndAccountingSystem.Enums;
@using HardwareReservationAndAccountingSystem.Models;
@model Equipment

@{
    ViewData["Title"] = "Įrangos informacija";
}

@functions {
     public string EquipmentStatusName(EquipmentStatus status)
     {
            string name;

            switch (status)
            {
                case EquipmentStatus.Public:
                    name = "Prieinamas viešai";
                    break;
                case EquipmentStatus.Archive:
                    name = "Archyvuotas";
                    break;
                case EquipmentStatus.Broken:
                    name = "Apgadintas";
                    break;
                case EquipmentStatus.Stolen:
                    name = "Pavogtas";
                    break;
                case EquipmentStatus.InRepair:
                    name = "Remontuojamas";
                    break;
                case EquipmentStatus.Draft:
                    name = "Ruošiamas";
                    break;
                default:
                    name = "";
                    break;
            }

            return name;
     }
}

@section PageHeaderTitle {
    <h2>Įrangos informacija</h2>
}

@section PageHeaderSubNavLinks {
    <a href="@Url.Action("Index", "Equipments")" class="btn btn-dark"><i class="fas fa-camera"></i> Visa įranga</a>
    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exportModal"><i class="fas fa-download"></i> Eksportuoti</button>
    <button type="button" class="btn btn-warning" data-toggle="modal" data-target="#editModal"><i class="far fa-edit"></i> Atnaujinti</button>
    <button type="button" class="btn btn-secondary" data-toggle="modal" data-target="#archiveModal"><i class="fas fa-archive"></i> Archyvuoti</button>
    <button type="button" class="btn btn-success" data-toggle="modal" data-target="#newModal"><i class="fas fa-pencil-alt"></i> Sukurti naują</button>
}

<div class="row">
    <div class="col-md-12 add-margin">
        <div class="content-block">
            <div class="title with-edit">
                <h3>Pagrindinė informacija</h3>
                <div class="edit-actions">
                    <button type="button" class="btn btn-link" data-toggle="modal" data-target="#editMainInfoModal"><i class="far fa-edit"></i></button>
                </div>
            </div>
            <div class="content base-info">
                <div class="row">
                    <div class="col-md-2"><p>Pavadinimas:</p></div>
                    <div class="col-md-10"><p>@Model.Title</p></div>
                </div>
                <div class="row">
                    <div class="col-md-2"><p>Sukūrimo laikas:</p></div>
                    <div class="col-md-10"><p>@Model.CreatedOn</p></div>
                </div>
                @if (Model.CreatedOn != Model.UpdatedOn)
                {
                    <div class="row">
                        <div class="col-md-2"><p>Atnaujinimo laikas:</p></div>
                        <div class="col-md-10"><p>@Model.UpdatedOn</p></div>
                    </div>
                }
                <div class="row">
                    <div class="col-md-2"><p>Įrangos tipas:</p></div>
                    <div class="col-md-10"><p>@Model.EquipmentType.Title</p></div>
                </div>
                <div class="row">
                    <div class="col-md-2"><p>Paskelbtas:</p></div>
                    @if (Model.Status == EquipmentStatus.Public)
                    {
                        <div class="col-md-10"><p class="is-public yes"><i class="fas fa-check"></i></p></div>
                    }
                    else
                    {
                        <div class="col-md-10"><p class="is-public no"><i class="fas fa-times"></i></p></div>
                    }
                </div>
                <div class="row">
                    <div class="col-md-2"><p>Įrangos būsena:</p></div>
                    <div class="col-md-10"><p>@EquipmentStatusName(Model.Status)</p></div>
                </div>
                @if (!string.IsNullOrWhiteSpace(Model.Description))
                {
                    <div class="row">
                        <div class="col-md-2"><p>Aprašymas:</p></div>
                        <div class="col-md-10">
                            <p>@Model.Description</p>
                        </div>
                    </div>
                }
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-md-12 add-margin">
        <div class="content-block">
            <div class="title with-edit">
                <h3>Galerija</h3>
                <div class="edit-actions">
                    <button type="button" class="btn btn-link" data-toggle="modal" data-target="#editGalleryModal"><i class="far fa-edit"></i></button>
                </div>
            </div>
            <div class="content">
                <div class="photo-gallery">
                    <a href="http://via.placeholder.com/500x400" data-lightbox="equipment-gallery">
                        <img src="http://via.placeholder.com/200x180">
                    </a>
                    <a href="http://via.placeholder.com/500x400" data-lightbox="equipment-gallery">
                        <img src="http://via.placeholder.com/200x180">
                    </a>
                    <a href="http://via.placeholder.com/500x400" data-lightbox="equipment-gallery">
                        <img src="http://via.placeholder.com/200x180">
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-md-12 add-margin">
        <div class="content-block">
            <div class="title">
                <h3>Įrangos užimtumas</h3>
            </div>
            <div class="content">
                <p>galima arba tokį kalendorių, arba tiesiog rezervacijų list į ką patenka šita įranga</p>
                <p>Arba šitoje vietoje kažkokią papildomą info apie rodomą kalendorių ir kad čia nebus galima rezervuotis, nes rezervacijos veikia ant komplektų</p>
                <div id="calendar">
                    <calendar />
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-12 add-margin">
        <div class="content-block">
            <div class="title">
                <h3>Su įranga susiję pranešimai</h3>
            </div>
            <div class="content">
                <p><a href="@Url.Action("Details", "Notifications")"><span>2019-03-10 13:20</span> Priminimas apie artėjančią įrangos "Pradedantysis operatorius" wggdr.</a></p>
                <p><a href="@Url.Action("Details", "Notifications")"><span>2019-03-08 08:35</span> Jūsų rezervacijos būsena įrangai "Komplektas renginio filmavim wetggdrgrd.</a></p>
                <p><a href="@Url.Action("Details", "Notifications")"><span>2019-03-05 09:36</span> Jūsų rezervacija įrangai "Pradedantysis operatorius" sėkmingai sggrd.</a></p>
                <p><a href="@Url.Action("Details", "Notifications")"><span>2019-03-02 14:26</span> Jūsų rezervacija įrangai "Dvi kameros" buvo atšaukta. Priežastis afsdgtdf</a></p>
                <p><a href="@Url.Action("Details", "Notifications")"><span>2019-02-27 15:09</span> Jūsų rezervacijos būsena įrangai "Komplektas renginio filmavimafsgdfh.</a></p>
                <p><a href="@Url.Action("Details", "Notifications")"><span>2019-03-08 08:35</span> Jūsų rezervacijos būsena įrangai "Komplektas renginio filmavim aewt setgdrg</a></p>
                <p><a href="@Url.Action("Details", "Notifications")"><span>2019-03-05 09:36</span> Jūsų rezervacija įrangai "Pradedantysis operatorius" sėkmingai sawr set.</a></p>
            </div>
        </div>
    </div>
    <div class="col-md-12 add-margin">
        <div class="content-block">
            <div class="title">
                <h3>Komplektai, kuriems priskirta</h3>
            </div>
            <div class="content">
                <h4>@Html.ActionLink("Komplekto pavadinimas", "Details", "EquipmentBundles")</h4>
                <p>
                    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quae qui non vident, nihil umquam magnum ac cognitione
                    dignum amaverunt. Itaque beatior Africanus cum patria illo modo loquens: Desine, Roma, tuos hostes reliquaque
                    praeclare: Nam tibi moenimenta mei peperere labores. Deque his rebus satis multa in nostris de re publica libris
                    sunt dicta a Laelio. Duo Reges: constructio interrete. Quem enim ardorem studii censetis fuisse in Archimede, qui
                    dum in pulvere quaedam describit attentius, ne patriam quidem captam esse senserit? Hanc se tuus Epicurus omnino
                    ignorare dicit quam aut qualem esse velint qui honestate summum bonum metiantur.
                </p>
            </div>
        </div>
    </div>
    <div class="col-md-12 add-margin">
        <div class="content-block">
            <div class="title">
                <h3>Pasikeitimų istorija?</h3>
            </div>
            <div class="content">
                <p>jei įranga buvo apgadinta ar pan tai visus laikus susirašyt kada kas įvyko ir matyti čia listą</p>
            </div>
        </div>
    </div>
    <div class="col-md-12 add-margin">
        <div class="content-block">
            <div class="title">
                <h3>Kas dar?</h3>
            </div>
            <div class="content">
                <p>...</p>
            </div>
        </div>
    </div>
</div>

@await Html.PartialAsync("~/Views/Equipments/_ModalEditMainInfo.cshtml")
@await Html.PartialAsync("~/Views/Equipments/_ModalEditGallery.cshtml")
@await Html.PartialAsync("~/Views/Equipments/_ModalEdit.cshtml")
@await Html.PartialAsync("~/Views/Equipments/_ModalArchive.cshtml")
@await Html.PartialAsync("~/Views/Equipments/_ModalExport.cshtml")
@await Html.PartialAsync("~/Views/Equipments/_ModalNew.cshtml")
